{% extends 'base.html.twig' %}

{% block title %}Commandes{% endblock %}

{% block body %}

<div class="container p-5">
    <h1 class="text-center m-5">Commandes</h1>
    
    {% for order in orders %}
        <div>
            <h2 class="mb-3 mt-5">Commande n°{{ order.id }}</h2>
            <h5>Informations du client</h5>
            <table class="table table-bordered">
                <tr>
                    <th>Nom</th>
                    <th>Prénom</th>
                    <th>Numéro de téléphone</th>
                    <th>Adresse</th>
                    <th>Ville</th>
                </tr>
                <tr>
                    <td>{{ order.firstName }}</td>
                    <td>{{ order.lastName }}</td>
                    <td>{{ order.phone }}</td>
                    <td>{{ order.address }}</td>
                    <td>{{ order.city.name }}</td>
                </tr>
            </table>
            <h5>Produits commandés</h5>
            <table class="table table-bordered">
                <tr>
                    <th></th>
                    <th>Nom du produit</th>
                    <th>Prix unitaire</th>
                    <th>Quantité</th>
                    <th>Prix total</th>
                </tr>
                {% for product in order.orderedProducts %}
                    <tr>
                        <td>
                            <img src="{{ asset('uploads/images/'~product.product.image) }}" class="m-2" style="width: 70px; height: 70px; border-radius: 10%;" alt="{{ product.product.name }}">
                            {{ product.product.name }}
                        </td>
                        <td><a class="text-decoration-none text-success " href="{{ path('app_product_page_show', {'id': product.id}) }}">{{ product.product.name }}</a></td>
                        <td>{{ product.product.price }} €</td>
                        <td>{{ product.quantity }}</td>
                        <td>{{ product.product.price * product.quantity }} €</td>
                    </tr>
                {% endfor %}
            </table>
            <h5 class="text-end mb-5">Total de la commande : {{ order.totalPrice }} €</h5>
            <a href="" class="btn btn-primary  col-2 m-lg-1">Marquer comme livrée</a>
            <hr>
        </div>
    {% endfor %}

    <div class="m-4">
        {{ knp_pagination_render(orders, 'layouts/pagination.html.twig') }}
    </div>

{% endblock %}
